{% extends "base.html" %}

{% block content %}
  <div class="main-content">
    <h1>Update Listing</h1>

    {% with messages = get_flashed_messages(with_categories=true) %}
      {% if messages %}
        {% for category, msg in messages %}
          <div class="alert alert-{{ category }}">{{ msg }}</div>
        {% endfor %}
      {% endif %}
    {% endwith %}

    <form method="post" action="{{ url_for('update_listing') }}">

      <!-- Listing ID (required to locate existing record) -->
      <div class="form-group">
        <label for="listing_id" class="form-label">Listing ID</label>
        <input id="listing_id" name="listing_id" type="number" class="form-control" required>
      </div>

      <!-- Editable Fields -->
      <div class="form-group">
        <label for="name" class="form-label">Listing Name</label>
        <input id="name" name="name" type="text" class="form-control">
      </div>

      <div class="form-group">
        <label for="description" class="form-label">Description</label>
        <textarea id="description" name="description" class="form-control"></textarea>
      </div>

      <div class="form-group">
        <label for="neighbourhood_overview" class="form-label">Neighbourhood Overview</label>
        <textarea id="neighbourhood_overview" name="neighbourhood_overview" class="form-control"></textarea>
      </div>

      <div class="form-group">
        <label for="room_type" class="form-label">Room Type</label>
        <select id="room_type" name="room_type" class="form-control">
          <option value="">Select a room type</option>
          <option value="Entire home/apt">Entire home/apt</option>
          <option value="Private room">Private room</option>
        </select>
      </div>

      <div class="form-group">
        <label for="accommodates" class="form-label">Accommodates</label>
        <input id="accommodates" name="accommodates" type="number" min="1" class="form-control">
      </div>

      <div class="form-group">
        <label for="bathrooms" class="form-label">Bathrooms</label>
        <input id="bathrooms" name="bathrooms" type="number" step="0.5" min="0" class="form-control">
      </div>

      <div class="form-group">
        <label for="bedrooms" class="form-label">Bedrooms</label>
        <input id="bedrooms" name="bedrooms" type="number" min="0" class="form-control">
      </div>

      <div class="form-group">
        <label for="price" class="form-label">Price ($)</label>
        <input id="price" name="price" type="number" step="0.01" min="0" class="form-control">
      </div>

      <div class="form-group">
        <label for="minimum_nights" class="form-label">Minimum Nights</label>
        <input id="minimum_nights" name="minimum_nights" type="number" min="1" class="form-control">
      </div>

      <!-- Neighbourhood Details -->
      <div class="form-group">
        <label for="neighbourhood_name" class="form-label">Neighbourhood Name</label>
        <input id="neighbourhood_name" name="neighbourhood_name" type="text" class="form-control">
      </div>

      <div class="form-group">
        <label for="neighbourhood_group" class="form-label">Neighbourhood Group</label>
        <input id="neighbourhood_group" name="neighbourhood_group" type="text" class="form-control">
      </div>

      <div class="form-group">
        <label for="latitude" class="form-label">Latitude</label>
        <input id="latitude" name="latitude" type="number" step="0.00000001" class="form-control">
      </div>

      <div class="form-group">
        <label for="longitude" class="form-label">Longitude</label>
        <input id="longitude" name="longitude" type="number" step="0.00000001" class="form-control">
      </div>

      <!-- Form Actions -->
      <div class="form-group">
        <button type="submit" class="btn btn-primary">Update Listing</button>
      </div>

    </form>
  </div>
{% endblock %}